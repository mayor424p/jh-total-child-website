{% extends 'pages/base.html' %}
{% load static %}
{% load widget_tweaks %}

{% block title %}Apply Now | JH Total Child Academy{% endblock %}

{% block content %}
<div class="container py-5 admission-page">

    <div class="text-center mb-5">
        <h2 class="">APPLICATION FORM</h2>
        <p class="text-muted">Please fill in all required information correctly</p>
    </div>
    {% if form.non_field_errors %}
    <div class="alert alert-danger">
        {{ form.non_field_errors }}
    </div>
    {% endif %}

    <!-- Stepper -->
<div class="mb-4">
    <div class="d-flex justify-content-between align-items-center">
        <div>Step <span id="currentStep">1</span> of 4</div>
        <div class="progress w-50">
            <div class="progress-bar" id="formProgress" role="progressbar" style="width: 25%"></div>
        </div>
    </div>
</div>



    <form method="post" novalidate enctype="multipart/form-data">
        {% csrf_token %}

        <!-- ================= STUDENT INFORMATION ================= -->
        <div class="card shadow-sm mb-4 section-student">
            <div class="card-header bg-primary text-white">
                Student Information
            </div>
            <div class="card-body row g-3">

                <div class="col-md-6">
                    <label class="form-label">Surname *</label>
                    {{ form.surname|add_class:"form-control" }}
                </div>

                <div class="col-md-6">
                    <label class="form-label">Other Names *</label>
                    {{ form.other_names|add_class:"form-control" }}
                </div>

                <div class="col-md-6">
                    <label class="form-label">Preferred Name</label>
                    {{ form.preferred_name|add_class:"form-control" }}
                </div>

                <div class="col-md-3">
                    <label class="form-label">Date of Birth *</label>
                    {{ form.date_of_birth|add_class:"form-control" }}
                </div>

                <div class="col-md-3">
                    <label class="form-label">Gender *</label>
                    {{ form.gender|add_class:"form-select" }}
                </div>

                <div class="col-md-4">
                    <label class="form-label">Religion</label>
                    {{ form.religion|add_class:"form-control" }}
                </div>

                <div class="col-md-4">
                    <label class="form-label">Nationality</label>
                    {{ form.nationality|add_class:"form-control" }}
                </div>

                <div class="col-md-4">
                    <label class="form-label">State of Origin</label>
                    {{ form.state_of_origin|add_class:"form-control" }}
                </div>

                <div class="col-md-6">
                    <label class="form-label">Local Government Area</label>
                    {{ form.local_government_area|add_class:"form-control" }}
                </div>

                <div class="col-md-6">
                    <label class="form-label">Home Phone Number</label>
                    {{ form.home_phone_number|add_class:"form-control" }}
                </div>

                <div class="col-md-12">
                    <label class="form-label">Residential Address *</label>
                    {{ form.address|add_class:"form-control" }}
                </div>

                <div class="col-md-6">
                    <label class="form-label">First Language</label>
                    {{ form.first_language|add_class:"form-control" }}
                </div>

                <div class="col-md-6">
                    <label class="form-label">Proposed Year of Entry *</label>
                    {{ form.proposed_year_of_entry|add_class:"form-control" }}
                </div>

                <div class="col-md-6">
                    <label class="form-label">Current School Name</label>
                    {{ form.current_school_name|add_class:"form-control" }}
                </div>

                <div class="col-md-6">
                    <label class="form-label">Current Class</label>
                    {{ form.current_class|add_class:"form-control" }}
                </div>

            </div>
        </div>

        <!-- ================= PARENT INFORMATION ================= -->
        <div class="card shadow-sm mb-4 section-parent">
            <div class="card-header bg-success text-white">
                Parent / Guardian Information
            </div>
            <div class="card-body row g-3">

                <div class="col-md-6">
                    <label class="form-label">Father's Name *</label>
                    {{ form.father_name|add_class:"form-control" }}
                </div>

                <div class="col-md-6">
                    <label class="form-label">Father's Phone *</label>
                    {{ form.father_phone|add_class:"form-control" }}
                </div>

                <div class="col-md-6">
                    <label class="form-label">Father's Email</label>
                    {{ form.father_email|add_class:"form-control" }}
                </div>

                <div class="col-md-6">
                    <label class="form-label">Father's Profession</label>
                    {{ form.father_profession|add_class:"form-control" }}
                </div>

                <div class="col-md-6">
                    <label class="form-label">Mother's Name *</label>
                    {{ form.mother_name|add_class:"form-control" }}
                </div>

                <div class="col-md-6">
                    <label class="form-label">Mother's Phone *</label>
                    {{ form.mother_phone|add_class:"form-control" }}
                </div>

                <div class="col-md-12">
                    <label class="form-label">Parents Address</label>
                    {{ form.parents_address|add_class:"form-control" }}
                </div>

            </div>
        </div>

        <!-- ================= MEDICAL INFORMATION ================= -->
        <div class="card shadow-sm mb-4 section-medical">
            <div class="card-header bg-warning">
                Medical Information
            </div>
            <div class="card-body row g-3">

                <div class="col-md-6">
                    <label class="form-label">Life-threatening Condition?</label>
                    {{ form.life_threatening_condition|add_class:"form-select" }}
                </div>

                <div class="col-md-12" id="conditionDetailsWrapper" style="display: none;">
                    <label class="form-label">Condition Details</label>
                    {{ form.condition_details|add_class:"form-control" }}
                </div>

                <div class="col-md-6">
                    <label class="form-label">Medication Needed?</label>
                    {{ form.medication_needed|add_class:"form-select" }}
                </div>


              

                <div class="col-md-12" id="medicationDetailsWrapper" style="display: none;">
                    <label class="form-label">Medication Details</label>
                    {{ form.medication_details|add_class:"form-control" }}
                </div>

            </div>

             <!-- <script src="https://www.google.com/recaptcha/api.js" async defer></script> -->

                <div class="mb-4 text-center">
                <div class="g-recaptcha" data-sitekey="{{ RECAPTCHA_SITE_KEY }}"></div>
                </div>

        </div>

      


        <!-- ================= SUBMIT ================= -->
       <div class="d-flex flex-column flex-md-row gap-3 mt-4">
            <button type="button" class="btn btn-secondary" id="prevBtn"  style="display:none;">Previous</button>
            <button type="button" class="btn btn-primary" id="nextBtn" >Next</button>
            <button type="submit" class="btn btn-success" id="submitBtn" style="display:none;">Submit Application</button>
        </div>


    </form>
</div>
{% endblock %}
